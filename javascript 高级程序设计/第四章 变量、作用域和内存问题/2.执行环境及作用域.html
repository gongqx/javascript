<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //执行环境是javascript中最重要的一个概念。执行环境定义了变量或函数有权访问的其他数据，决定了它们各自的行为。
        //每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象中。
        //虽然我们编写的代码无法访问这个对象，但解析器在处理数据时会在后台使用它。
        //执行环境有全局执行环境和函数执行环境之分；
        //每次进入一个新执行环境，都会创建一个用于搜索变量和函数的作用域链。
        var color = 'blue';

        function changeColor() {
            var anotherColor = 'red';

            function swapColors() {
                var tempColor = anotherColor;
                anotherColor = color;
                color = tempColor;
                //这里可以访问 color、anotherColor和tempColor
                console.log(color);
                console.log(anotherColor);
                console.log(tempColor);
            }
            //这里可以访问color和anotherColor,但不能访tempColor
            swapColors();
            console.log(color);
            console.log(anotherColor);
            // console.log(tempColor);
        }
        //这里只能访问color
        changeColor();
        console.log(color);
        // console.log(anotherColor);
        // console.log(tempColor);

        //javascript没有块级作用域
        if(true){
            var color="blue";
        }
        console.log(color);//blue
        for(var i = 0;i<10;i++){
            console.log(i);
        }
        console.log(i);//10
        //如果存在块级作用域，应该是color is undefined，
        //但是在javascript中if/for语句中的变量声明会将变量添加到当前的执行环境（这里是全局环境）中。
        //查询标识符的过程
        var color ="blue";
        function getColor(){
            return color;
        }
        console.log(getColor());//blue

        var color2 ="blue";
        function getColor2(){
            var color2 = 'red';
            return color2;
        }
        console.log(getColor2());//red
        //搜索过程首先从局部变量中开始，没有发现后再去父层寻找。
        //函数的局部环境不仅有权访问函数作用域中的变量，而且有权访问其包含（父）环境,乃至全局环境。
        //全局环境只能访问在全局环境中定于的变量和函数，而不能直接访问局部环境中的任何数据。

    </script>
</body>

</html>